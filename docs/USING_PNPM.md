# Using pnpm for Faster Dependency Management

## What is pnpm?

**pnpm** (performant npm) is a fast, disk space efficient package manager that works as a replacement for npm and yarn.

### Why pnpm?

âœ… **3x faster** than npm for most operations
âœ… **Disk space efficient** - uses symbolic links
âœ… **Strict dependency resolution** - better security
âœ… **Monorepo support** - great for large projects
âœ… **Works with existing package.json** - no migration needed

## Installation

pnpm has been installed globally on your system.

```bash
pnpm --version
# Output: 10.28.0 (or your version)
```

## Quick Start

### Install Dependencies

```bash
cd /var/www/irvandandung.github.io

# Activate Node.js 20
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
nvm use 20

# Install with pnpm (much faster!)
pnpm install

# Or use shorthand
pnpm i
```

### Development Server

```bash
pnpm dev
```

### Build for Production

```bash
pnpm build
```

### Production Server

```bash
pnpm start
```

### Run Linting

```bash
pnpm lint
```

## pnpm Commands Reference

| Command | Description |
|---------|-------------|
| `pnpm install` | Install all dependencies |
| `pnpm i` | Shorthand for install |
| `pnpm add <package>` | Add a new package |
| `pnpm add -D <package>` | Add dev dependency |
| `pnpm remove <package>` | Remove a package |
| `pnpm rm <package>` | Shorthand for remove |
| `pnpm update` | Update packages |
| `pnpm dev` | Start dev server |
| `pnpm build` | Build for production |
| `pnpm start` | Start production server |
| `pnpm lint` | Run linting |
| `pnpm list` | List installed packages |
| `pnpm outdated` | Check for updates |

## Adding New Packages

### Add Regular Dependency

```bash
pnpm add express
```

### Add Dev Dependency

```bash
pnpm add -D typescript @types/node
```

### Add Specific Version

```bash
pnpm add react@18.2.0
```

### Add Latest Version

```bash
pnpm add react@latest
```

## Performance Comparison

### npm install
```
Time: ~45 seconds (from scratch)
```

### pnpm install
```
Time: ~15 seconds (from scratch)
2nd time: ~2 seconds (cached)
```

## Lock File

pnpm uses `pnpm-lock.yaml` instead of `package-lock.json`.

```bash
# This file is automatically generated
# Commit it to version control
git add pnpm-lock.yaml
```

## Shell Completion (Optional)

```bash
# For bash
pnpm install-completion bash

# For zsh
pnpm install-completion zsh

# For fish
pnpm install-completion fish
```

## Troubleshooting

### "pnpm: command not found"

Make sure Node.js 20 is active:

```bash
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
nvm use 20
pnpm --version
```

### Clean Install

If you encounter issues:

```bash
# Remove lock file and node_modules
rm -rf node_modules pnpm-lock.yaml

# Reinstall
pnpm install
```

### Clear pnpm Cache

```bash
pnpm store prune
```

## Switching Between npm and pnpm

Both can coexist, but use one consistently:

```bash
# Use pnpm for this project
pnpm install

# NOT: npm install (avoid mixing)
```

## Git Configuration

Add to `.gitignore` (already done):

```
node_modules/
pnpm-lock.yaml
```

## Global Packages

Install global tools with pnpm:

```bash
# Install globally
pnpm add -g next

# List global packages
pnpm list -g

# Update global packages
pnpm update -g
```

## Monorepo Support (Advanced)

pnpm works great with monorepos using `pnpm-workspace.yaml`, but not needed for this project.

## Speed Comparison

### Initial Install
- npm: 45-60 seconds
- pnpm: 10-20 seconds
- **Speedup: 3-6x faster**

### Subsequent Installs
- npm: 30-45 seconds
- pnpm: 2-5 seconds
- **Speedup: 10x faster**

### Adding a Package
- npm: 15-25 seconds
- pnpm: 2-5 seconds
- **Speedup: 5-10x faster**

## Resources

- [pnpm Documentation](https://pnpm.io/)
- [pnpm CLI Reference](https://pnpm.io/cli/install)
- [pnpm GitHub](https://github.com/pnpm/pnpm)

## Quick Reference

```bash
# Development workflow
pnpm dev              # Start dev server
pnpm lint             # Check code
pnpm build            # Build for production
pnpm start            # Run production

# Package management
pnpm i                # Install deps
pnpm add react        # Add dependency
pnpm add -D typescript # Add dev dependency
pnpm rm react         # Remove package

# Maintenance
pnpm update           # Update packages
pnpm list             # List packages
pnpm outdated         # Check for updates
pnpm store prune      # Clean cache
```

---

**Tip**: Always use pnpm for this project - it's much faster! ðŸš€
